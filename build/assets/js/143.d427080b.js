/*! For license information please see 143.d427080b.js.LICENSE.txt */
"use strict";(self.webpackChunkphysical_ai_humanoid_robotics_textbook=self.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[143],{3143:(e,t,n)=>{function o(e,t,n,r){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}o=function(e,t,n,r){function a(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?s?s(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},o(e,t,n,r)}function r(){var e,t,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,s,a){var i=r&&r.prototype instanceof u?r:u,l=Object.create(i.prototype);return o(l,"_invoke",function(n,o,r){var s,a,i,u=0,l=r||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return s=t,a=0,i=e,h.n=n,c}};function f(n,o){for(a=n,i=o,t=0;!d&&u&&!r&&t<l.length;t++){var r,s=l[t],f=h.p,p=s[2];n>3?(r=p===o)&&(i=s[(a=s[4])?5:(a=3,3)],s[4]=s[5]=e):s[0]<=f&&((r=n<2&&f<s[1])?(a=0,h.v=o,h.n=s[1]):f<p&&(r=n<3||s[0]>o||o>p)&&(s[4]=n,s[5]=o,h.n=p,a=0))}if(r||n>1)return c;throw d=!0,o}return function(r,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&f(l,p),a=l,i=p;(t=a<2?e:i)||!d;){s||(a?a<3?(a>1&&(h.n=-1),f(a,i)):h.n=i:h.v=i);try{if(u=2,s){if(a||(r="next"),t=s[r]){if(!(t=t.call(s,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,a<2&&(a=0)}else 1===a&&(t=s.return)&&t.call(s),a<2&&(i=TypeError("The iterator does not provide a '"+r+"' method"),a=1);s=e}else if((t=(d=h.n<0)?i:n.call(o,h))!==c)break}catch(t){s=e,a=1,i=t}finally{u=1}}return{value:t,done:d}}}(n,s,a),!0),l}var c={};function u(){}function l(){}function d(){}t=Object.getPrototypeOf;var h=[][s]?t(t([][s]())):(o(t={},s,function(){return this}),t),f=d.prototype=u.prototype=Object.create(h);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=d,o(f,"constructor",d),o(d,"constructor",l),l.displayName="GeneratorFunction",o(d,a,"GeneratorFunction"),o(f),o(f,a,"Generator"),o(f,s,function(){return this}),o(f,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:p}})()}function s(e,t,n,o,r,s,a){try{var i=e[s](a),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(o,r)}n.r(t),n.d(t,{default:()=>l});var a=n(6540);const i={buttonContainer:"buttonContainer_bhW3",floatingButton:"floatingButton_ingx",selectedTextButton:"selectedTextButton_tTT5",slideIn:"slideIn_oKkD",chatWindow:"chatWindow_gkuN",slideUp:"slideUp_h5NH",header:"header_XAMZ",closeButton:"closeButton_zIiJ",messagesContainer:"messagesContainer__1H3",message:"message_JIQK",fadeIn:"fadeIn_XNDe",user:"user_hzV0",assistant:"assistant_pri8",messageContent:"messageContent_AzHs",messageText:"messageText_pI0P",selectedTextContext:"selectedTextContext_NQuU",sources:"sources_wNGj",source:"source_a6ox",loadingSpinner:"loadingSpinner_vVig",bounce:"bounce_VndK",inputArea:"inputArea_ZeQ5",selectedTextIndicator:"selectedTextIndicator_kc_K",inputContainer:"inputContainer_Xfat",input:"input_OZTt",sendButton:"sendButton_WdSO"};const c=function(){if("undefined"==typeof window)return{apiEndpoint:process.env.CHATBOT_API_URL||"http://localhost:8000"};if(window.__CHATBOT_CONFIG__)return window.__CHATBOT_CONFIG__;var e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,t="http://localhost:8000";return"physical-ai-humanoid-robotics-book-tan.vercel.app"===window.location.hostname?t="https://your-backend-api-goes-here.com":e&&(t="http://localhost:8000"),{apiEndpoint:t}};var u=n(4848);function l(){var e=(0,a.useState)(!1),t=e[0],n=e[1],o=(0,a.useState)([{id:1,type:"assistant",text:"Hi! I'm your AI tutor for the Physical AI & Humanoid Robotics book. You can:\n\n1. **Ask questions** about the book content\n2. **Select any text** from the book and click the \"Ask AI\" button\n3. **Get instant answers** based on the book's content\n\nHow can I help you today?"}]),l=o[0],d=o[1],h=(0,a.useState)(""),f=h[0],p=h[1],m=(0,a.useState)(""),x=m[0],v=m[1],b=(0,a.useState)(!1),g=b[0],_=b[1],y=(0,a.useState)(function(){return c().apiEndpoint||"http://localhost:3000"}),j=y[0],k=(y[1],(0,a.useRef)(null)),w=(0,a.useRef)(null);(0,a.useEffect)(function(){var e=function(){var e=window.getSelection().toString().trim();e&&v(e)};return document.addEventListener("mouseup",e),document.addEventListener("touchend",e),function(){document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e)}},[]),(0,a.useEffect)(function(){var e;null==(e=k.current)||e.scrollIntoView({behavior:"smooth"})},[l]),(0,a.useEffect)(function(){if(x){var e=setTimeout(function(){console.log("Selected text detected:",x.substring(0,50))},100);return function(){return clearTimeout(e)}}},[x]);var T=function(){var e,t=(e=r().m(function e(){var t,n,o,s,a,i,c;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(f.trim()){e.n=1;break}return e.a(2);case 1:return t={id:l.length+1,type:"user",text:f,selectedText:x||null},d(function(e){return[].concat(e,[t])}),p(""),_(!0),e.p=2,n=x?j+"/ask-selected-text":j+"/ask",e.n=3,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:f,selected_text:x||null,top_k:5})});case 3:if((o=e.v).ok){e.n=4;break}throw new Error("API error: "+o.statusText);case 4:return e.n=5,o.json();case 5:s=e.v,a={id:l.length+2,type:"assistant",text:s.answer,sources:s.sources||[]},d(function(e){return[].concat(e,[a])}),v(""),e.n=7;break;case 6:e.p=6,c=e.v,i={id:l.length+2,type:"assistant",text:"Error: "+c.message+". Make sure the API server is running at "+j},d(function(e){return[].concat(e,[i])});case 7:return e.p=7,_(!1),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}),function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){s(a,o,r,i,c,"next",e)}function c(e){s(a,o,r,i,c,"throw",e)}i(void 0)})});return function(){return t.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:i.buttonContainer,children:[(0,u.jsx)("button",{className:i.floatingButton,onClick:function(){return n(!t)},title:"Open AI Tutor","aria-label":"Open AI Tutor",children:(0,u.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,u.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,u.jsx)("path",{d:"M12 1v6m0 6v6M4.22 4.22l4.24 4.24m5.08 5.08l4.24 4.24M1 12h6m6 0h6M4.22 19.78l4.24-4.24m5.08-5.08l4.24-4.24"})]})}),x&&(0,u.jsx)("button",{className:i.selectedTextButton,onClick:function(){x?t||n(!0):alert("Please select text from the book first")},title:'Ask AI about: "'+x.substring(0,30)+'..."',children:"Ask AI"})]}),t&&(0,u.jsxs)("div",{className:i.chatWindow,ref:w,children:[(0,u.jsxs)("div",{className:i.header,children:[(0,u.jsx)("h3",{children:"AI Tutor"}),(0,u.jsx)("p",{children:"Physical AI & Robotics Assistant"}),(0,u.jsx)("button",{className:i.closeButton,onClick:function(){return n(!1)},"aria-label":"Close chat",children:"\u2715"})]}),(0,u.jsxs)("div",{className:i.messagesContainer,children:[l.map(function(e){return(0,u.jsx)("div",{className:i.message+" "+i[e.type],children:(0,u.jsxs)("div",{className:i.messageContent,children:[(0,u.jsx)("div",{className:i.messageText,children:e.text}),e.selectedText&&(0,u.jsxs)("div",{className:i.selectedTextContext,children:[(0,u.jsx)("strong",{children:"Selected text:"}),(0,u.jsxs)("p",{children:['"',e.selectedText.substring(0,100),'..."']})]}),e.sources&&e.sources.length>0&&(0,u.jsxs)("div",{className:i.sources,children:[(0,u.jsx)("strong",{children:"Sources:"}),e.sources.map(function(e,t){return(0,u.jsx)("div",{className:i.source,children:"selected_text"!==e.url&&(0,u.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:new URL(e.url).pathname.split("/").pop()||"View"})},t)})]})]})},e.id)}),g&&(0,u.jsx)("div",{className:i.message+" "+i.assistant,children:(0,u.jsx)("div",{className:i.messageContent,children:(0,u.jsxs)("div",{className:i.loadingSpinner,children:[(0,u.jsx)("span",{}),(0,u.jsx)("span",{}),(0,u.jsx)("span",{})]})})}),(0,u.jsx)("div",{ref:k})]}),(0,u.jsxs)("div",{className:i.inputArea,children:[x&&(0,u.jsxs)("div",{className:i.selectedTextIndicator,children:['Selected: "',x.substring(0,40),x.length>40?"...":"",'"']}),(0,u.jsxs)("div",{className:i.inputContainer,children:[(0,u.jsx)("textarea",{value:f,onChange:function(e){return p(e.target.value)},onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),T())},placeholder:"Ask me anything about the book...",className:i.input,disabled:g,rows:"3"}),(0,u.jsx)("button",{onClick:T,disabled:g||!f.trim(),className:i.sendButton,"aria-label":"Send message",children:g?"...":"\u2192"})]})]})]})]})}}}]);